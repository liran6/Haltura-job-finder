package com.example.haltura.ViewModels

import android.graphics.Bitmap
import android.graphics.drawable.BitmapDrawable
import android.graphics.drawable.Drawable
import androidx.lifecycle.MutableLiveData
import androidx.lifecycle.ViewModel
import com.example.haltura.Api.ChatAPI
import com.example.haltura.Api.ServiceBuilder
import com.example.haltura.Models.InfoChatSerializable
import com.example.haltura.Models.ProfileSerializable
import com.example.haltura.Utils.Const
import com.example.haltura.Utils.UserData
import com.example.haltura.Utils.notifyAllObservers
import com.google.gson.Gson
import okhttp3.ResponseBody
import org.json.JSONObject
import retrofit2.Call
import retrofit2.Callback
import retrofit2.Response


class ShowChatInfoDialogViewModel : ViewModel() {

    val mutableMembersList: MutableLiveData<MutableList<ProfileSerializable>> by lazy { //by lazy
        MutableLiveData<MutableList<ProfileSerializable>>(mutableListOf())
    }

    val mutableChatInfo: MutableLiveData<InfoChatSerializable> by lazy { //by lazy
        InfoChatSerializable(chatName = "", chatImage = "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")
        MutableLiveData<InfoChatSerializable>(null)
    }

//    val mutableChatImage: MutableLiveData<Bitmap> by lazy { //by lazy
//        val d: Drawable = ImagesArrayList.get(0)
//        val bitmap = (d as BitmapDrawable).bitmap
//        MutableLiveData<Bitmap>(bitmap)
//    }

    val mutableMessageToasting: MutableLiveData<String> by lazy {
        MutableLiveData<String>()
    }//todo: connect it to activity /frag ?

    private var json = Gson()


    fun getChatInfo(chatId :String) {
        mutableMembersList.value!!.clear()
        val retroService =
            ServiceBuilder.getRetroInstance().create(ChatAPI::class.java)
        val call = retroService.getChatInfo("Bearer " +
                UserData.currentUser?.token!!, chatId)
        call.enqueue(object : Callback<ResponseBody> {
            override fun onFailure(call: Call<ResponseBody>, t: Throwable) {
                mutableMessageToasting.postValue(Const.Connecting_Error)
            }

            override fun onResponse(call: Call<ResponseBody>, response: Response<ResponseBody>) {
                if (response.isSuccessful) {
                    val res = response.body()!!.string()
                    //val jObject = JSONObject(response.body()!!.string())
                    //val chatInfo = json.fromJson(jObject, InfoChatSerializable::class.java)
                    //val profiles = jObject.get("profile_list") as JSONArray
                    val chatInfo = json.fromJson(res, InfoChatSerializable::class.java)
                    //val chatInfo = json.fromJson(jObject, InfoChatSerializable::class.java)
                    chatInfo.profileList?.let { mutableMembersList.value!!.addAll(it) }
                    mutableMembersList.notifyAllObservers()
                } else {
                    mutableMessageToasting.postValue(Const.Token_Error)
                }
            }
        })
    }

}